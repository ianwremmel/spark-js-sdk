/**!
 *
 * Copyright (c) 2015-2017 Cisco Systems, Inc. See LICENSE file.
 * @ignore
 */

import {assert} from '@ciscospark/test-helper-chai';
import SparkCore, {registerPlugin, SparkPlugin} from '@ciscospark/spark-core';

describe(`spark-core`, () => {
  describe(`SparkPlugin`, () => {
    describe(`#config`, () => {
      const config = {
        hasconfig: {
          proof: true
        }
      };

      registerPlugin(`hasconfig`, SparkPlugin.extend({
        namespace: `hasconfig`
      }), {config});

      registerPlugin(`hasnoconfig`, SparkPlugin.extend({
        namespace: `hasnoconfig`
      }));

      it(`is never undefined`, () => {
        const spark = new SparkCore();
        assert.isTrue(spark.config.hasconfig.proof, `test config is available from the root spark config`);
        assert.isTrue(spark.hasconfig.config(`proof`), `test config is available from the plugin config`);
        assert.isDefined(spark.hasconfig.config);
        assert.isDefined(spark.hasnoconfig.config);
      });
    });
  });
});
