import RoapMessage from './roap-message';

/**
 * An ERROR message
 */
export default class ErrorMessage extends RoapMessage {
  messageType = 'ERROR';

  errorType = '';

  errorCause = '';

  /**
   * constructor
   * @param {number} seq
   * @param {roapErrorType} type
   * @param {string} reason
   */
  constructor(seq, type, reason) {
    super(seq);
    if (type) {
      this.errorType = type;
    }
    if (reason) {
      this.errorCause = reason;
    }
  }

  /**
   * Indicates if this message is valid according to its
   * {@link RoapMessage#messageType}
   * @see {@link RoapMessage#isValid()}
   * @returns {boolean}
   */
  isValid() {
    return Boolean(this.version === 2 && this.messageType === 'ERROR' && this.errorType);
  }
}
